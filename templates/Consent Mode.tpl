___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Sourcepoint CMP - Consent Mode v2",
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARsAAAEJCAYAAACkM4OxAAAACXBIWXMAAC4jAAAuIwF4pT92AAAgAElEQVR4nO3dd5AcV37Y8V/37g4W2AUWGRuQQYQlGMDMBam7YzzqbMuSE7wXwSpVWfYf0lmJ57McZCvcSQTBO5dLqnK5KJUts053kkiA4QgmEAR4gTkAYALIYwIYQCJs7Jme53o9/WY6vO5+3f26+/XM73sFkoPF7YG83Q9/773uHu1bY8fX/ulT694GDMOwjLoefnOtTgBe+Nb2t7bhP2QMw7LoevjNnQDaX1FsBgBgP4KDYZjsroffotDcpYEGOhACBAiCg2GY1JzQAMWG0M9OwAKHIDgYhknoevjmTs0BjY0N/Q/QAYf+AcHBMCxVN9jQgAOaxjLKGmys+abxRwscguBgGBY7Cg1woGlMNqS5jLI+r72sQnAwDIvVDfDvdwLodzmRcS2jmsx4wCE2OLchOBiGRdSApjHReJEB5waxc9+GNF81wAGC4GAYFtwN8NvNUyceMuw/jWWUc9/Gv6yywTmO4GAY5opC0zh10gORcS+j+Ps2HnAAwcEwrNmN8Du+U6fIZZR/38b92l5YDRAKzhiCg2GdHoWGd+rEX0bp9h8JgBMcYr92XX/T4se6DgfBwbDO7Ub4XQc0eggynmUUsZdRrXmGeIHxLrMQHAzr0JzQRCOjByyjmsA4Xgcsqxg4v4/gYFjHdCP8nuPUKXpD2HcaBVxgwAMM93jcunkTwcGw9s8JTVxkWpONvYZqAUOi9m2cUw+Cg2Ft3o3w+76bKkU2hIMv6msCA5x9m9DjcQQHw9q0m2xoWmjorvud0i2jwl5D4D6OdWsDgoNh7dNNcJvQ8Xa8ZZQLGO9r/z5OwDILwcGwNskLjRgyeig+jcnGBYz92gWK8PE4goNhJe8m+BbneFv3QRN7GeUExrlvQ0SWVfzjcQQHw0oag0Z0aRS2Iez+tXpjGUVCl1HRyyrO8bgFzu+NHUNwMKwk3QT/gXPqFL40ijPhBC+jApZVMY7HrZs3ERwMU7+bbWiSXkMTexnVosINTorjcQQHwxTvZvh2jJsq4yKjOycbJzCOSaW5j8NZRsU7HkdwMEzRvNCEbQj7QRHZq3EdfbuBsaAIXVYlOh63Hk+B4GCYOt0M/zHGTZVxJxzd9/O6Gxj+Mirwdbzj8QY4VyM4GFZ0XmjiIcO/CTPqc/iWUX5w3K9THo9bd4sjOBhWXDfDHwQeb4sdYyfbw9H9wIBjNrGXQ3KPxy1wfhfBwbDco9DEu6ky7s8HP3rCPvp2LIUcryFqGZX8eNy6eRPBwbD8+iL8p8DjbTFkxJ/Kx11GEc/k4ZpEuPs40o7HERwMyykKTfjxdvTFe+mXUdbfqxMY8IDify3xeHwAgCA4GJZhX4T/HHlTZbKNYvfUE/U5dDcwzat/HWdMfmAkH49btzYgOBgmPyc0cZZGUcfYiZdR4L8upvk6elkl5XgcwcEwyX0R/kuCmyrjbwhHT0l6axnVnGG4wIAHGO9racfjNjhvIjgYljIKDe/UKd4yKt6GcBRgjveNghY4gcsq8L2WfDxuHYv/DoKDYYm7xYYmHILwpZEcZNxTj+6eaMADjPt1Tsfj1ikVgoNh8bsF/utOAD3xTZXiG8XxHz1hP4O4Mc44gXHu2xRwPG7dvIngYJh4DWjETp3Cfz7ZhnDkMoq3v+KcPJLt40g5HkdwMEywW+APBW+qjPfmcsmQ0bmfg7+MirWPk+nxuHXzJoKDYcG1oEl/X1P0Ho7Ioyf4P+9eRtl/O25gvPs2uR+PIzgYFtAt8N9CbqoU3xDmbejKX0bZfw8NLLz7Nt4N3MKOxxvgXIXgYBiLQtM43k72yId4yyiR2xnCfx86OI6s/fs2SZZV4Hst6Xh8gGhw4A9//cQt+NWGdXo3nNn130WfGRxnQzj55xBYRrENXP8yirOscr4u4Hh8zrI58+Zv7v3R9/7iU5xwsI7tVnhx5+n3e/9gdpIYIksjuRNO/CUam3r8y6jA18Uej89Z1mv2rV7QBRr00etwEBysE6PQAJC7iKnBoQferBiTxIi/yRvn55NvCAcsoxzTBQ+cgo/H5yzvNfvXLOhyfG0NIDhYp3UrvGBBw75zalUTDj7weiVqwomzIZz5Mgo8yx32je8Epqjj8d5lveb8NQNdnK8rBAfrmG6F5xsTDdRb/8rWNBuco5XZybpnwol+5EP6ZZTIEq31+9B5G7jAnXLyPx7vXT7XnL+WCw0LwcHaPgoNsaBxHOXQ72P7G7pWrcOhB45WZibrCScc3s+LPHoi3s/rrkkEovZt8jse713eay4Ih4aF4GBt2054zoLGuZHhAsdGp2pQcA5bS6ro6ST5U/nEf61/iaY7HtNp/f/VAsYPEH/fJsmyCnyvndPV3BVzzYG1C0WgYSE4WNu1E55t7tG4/3XOvoPsb2T7TxScgw+8XJmZNFNMOGJLoyRQ2VcQ8/Zt/Bu4eRyPz4sPDQvBwdomJzRsn8b9r3zH97IFjmaDY8LB+1+uzE6avgkny7dpEfl5nfeN75o8RJZVzdfpjsf7Vsw1F65blAQaFoKDlb6d8Iy9GewFpt6acBx7NuD6aw2qVROevP9F34STBhlozibiG8L8ZZR3EuEuoyL2dVIej/etmJcWGhaCg5W2b8Az/s1g7jKK7dm4l1LsLxrgvFCZnaxxJpz0+CRfRnH3bcJfyzwepxPNovVSoGEhOFjp+gY8vROg7tsMJl5krAkHuMg4X1NwDtz/vOCEk/2jJ3TSosIBivu1dwM3chnleh1+PN43OM9cvH6xTGhYCA5Wmr4BP/dsBvP2abx7NhoXGbZ/Q6N7OAfuf7Yyk2rCCV4atX4u+kpjxzOI+fsrvkkEBPdxXPs2/OPxvsE+c0k20LAQHEz5nNDwpxjOhGNj4lpKcfZvQGPgPFOZnqwafgjkvE2L0DLKCwEEnCD5l1Xpjsf7B+eZS7OFhoXgYMr2DfiZtXQKm2KIfSLl+1gTGQ86nKVV1ajBgfuerszY4KSFQ2Tq8S7RWu+I6QKGCO3jJD0e7x/sM5duWJIHNCwEB1Our8NPAzeD/RMOZxkF0cg4l1bVag2euO9nlelJgzPhJFsaxYGqdZ0NcB/L6di3kXM8TieaZflCw0JwMGWi0Hgv2Ivap2ETDltGad7JJmL/BuxN4yfu+2kGEw7v17qXaLr/+TEtcNz7Nt5lVfzj8fmDfeby85YWAQ0LwcEK7+vwExc0Yfs0EDrh2FONa7IJ37+hUXD23/dUjAkneGkUB6rmM4i9G7hi+zZRy6zW8fj8of6ioWEhOFhhfR2esqGJMcVwP9aApeWJ6P5N49fQTeP99x2qzEzOciacbB49obeMDHsOsGP7OMHx+MBgn7lCDWhYCA6Wewya+FNMnfMxO419U8fbvwF70/jxvYcq0zY48pZR/Gt2dKH3c0pxPD4w1G+u2LhMJWhYCA6WW1+DQ4k2gwM/1oTFBifB/k1j07gKj+990p5wRJZGyR89YV9B7AUn6u1VxI7HB4b6zEE1oWEhOFjmfQ0OcjaDk+zTtCacBjitZZFVgv0bdkr16N4nKlOTM5InHM4yCpr7K56/3ahlVcg+zsLhfnNo43KVoWEhOFhmuaGpB08qze86/j6NG6C6+7drI5N0/wasB3DV4LG9+yvTNjiiSyM3KOGPntCj314F/K8jjscHhuaXBRoWgoNJ72vwpO/K4LApxo1MPeRj9jclZ7JJun9Dqxl0wnm8MjU5HXvCif61Om8ZFb6scgPj3bcBa6IZ2VQqaFgIDiatr8GB5h5N+imG8zHP3ouM/Rv6p5pRhUf3PlaZtsERA0XsJk6dD4z3/ZtayyrvPg60+IGFQ/PNkU0ryggNC8HBUvdVGxp5UwxvHwd8ey8y9m+sPRyjCo/secSecOI9lS90GdWiwv0cYOIDBoKXVQCwaLjfXLm51NCwEBwscV+FJwQ2g+N/jHtvlBUfmTT7N5q9afzInn2V6YmpWFca86ae5mmU//6mgGVUCDiLhuebKzcPtgM0LAQHi50XGvekIj7hhOPkfiuXsMkmzf6NBg1wHt67rzJlg8PbEI4z4bTeN0rkbXE5+ziLRhaYq9oLGhaCgwn3VdjffPBV2n0a3hTjw0kj/v0ayfs3mnVrQxUe3vuQ8ISTaBkFAeA4l1WLR+abq9sTGhaCg0X2VXjcsxksd4rhfwy4QDReSti/cSytqoYB+/Y+WJmamIw8pQqbevTot1dxP/6TTTVLRhaYq7cMtTM0LAQHC+wrNjSZTjHcj0MoEI2XKfZv7Ndac9PYgH17GDjJHj3RfAZx+L6N+/WSkQFzTWdAw0JwMF9fgcdCnxmcdDM4bMJpLaOCgMhm/6ZxpTEF577KZOiEE3wTp95U0nuDZcCyaunIgLl2tKOgYSE4WLOvwKMRj4nwTzj8j4WdNnk/p/PXQAAQwfs3vskm5v4Nu5dq3549lamJidh7OK0n9QHbKAYPMK3XS1d2LDQsBAdzQRO0T8OfVOLt0wTjVG9NN669FwidcjQAgf0bzufwLM8oOA/t2VOZtMERPQrX3cDY9HDAWbpygbludLiToWEhOB3cV+CR0CuDw6YYHxbCUwwPHxCbSpovRfdvgjaNW/s3wDaN99wTa8LR3cA49m4c9zvRiWb96AhC0wrB6cC+DA/bm8HJphg/QCJTTABcQkBkt39DfxiGAQ/t+YfK5MS5wCuNfcsoNzDgWlYtG1lobjgfoeGE4HRQFJqgN/mXuxksOuHYhQIRtH/DmWx4nyNgaeVcjlng3Pv3lSkLnKBllO5YRlmfzP6bcCyrlq1caG7YitCEhOB0QF+GfdzN4LAJh4dF0gnHuTxz/pwWNpUAhEw5mguMwP0bweWZUTXgx/f+yJ5wopZR3vd3ArCgOQ+hEQnBaeO+DA8FPCaCj0UW+zS85Zn1Xdr8vo8PhMz9G1oDnB9WpibOBk44zQeetyYagOWrBsyNW1ciNOIhOG0Yhaa1GSxvipGyxHIgoMnevwHwfI7o/RuwwXnw3r+tTNrgeB+crnsfG7F85UJz49ZVCE38EJw2ahx+HHBlcPophrcEE/9YwCYxSNy/ibE8cy/HAAxjFh689wdNcAKXUStWLTI3XYDQpAjBaYPG4UGBzWCRKSbtRnHw7Q6NWkCosn/T2DSm4Py/ysTEmeYejmsZNbhqkbkZoZERglPi3NCITDHhEw7v4/GnGN7FgP4pRJX9G3ZK9eA9f1OZtMEBdvQ9uBqhkRyCU8LG4QHX+zqJIZP0fZ/Ep5jWfxz/W81vfPcUwt+/gdz3b9gp1QP3/N/KxMRpCxx91fqltS0XrEZo5DdA6uTQbbd+jOCUoC+d+OH/DHpfJ9FbCOJOMXyARG5pYJvEotfOaB4g8tm/AXvT+IF7/k/lnV+8slkfHRv+607/Qsuqlx85MZdOOAiO2v3G4YM7P33/3L+bnqJvY5LfFBONU9iEY8cBQqX9G7D+idTIux+++E39tj9a+Os9i8j/7twvtWx6ad8H5J1XTmtsSYXgqBmFBgDuqpt1ePjppyvTU9NGflNMmgknfApJvX8T+vnF92+6K91k1aYV48eu/B8/sDaIERy5MWgc/8wRHAVj0LDfWbVWg4d//kylMeGITDHiH+PjlPzREy5wXChI2r+Je2sDZ/+mAc1yCxqwb1qwQnDk9NLDH5B3D5/WNF0D+sMRgqNQXmhYFJxHfkbBmQ2dcEQ3dbN79IQnxfZvenq6GtBc8f0fsI/qzt8xgpOulx4+Qd61JhrN/v9N834+BEeBgqBhWeD8tAGOrPd9yubRE3YhQMTev4HWpMTfv/F8Ds5k093TTVZuWjZ+7PLv/QAcubABBCdxL1NoDn/WnGg4kw0LwSmwKGhYFJxHf/JMZXpy1pA7xcTdDA76mCdZ+zeepZV//8azaezZv6FLp5Ubl4wfu8wNDfCwAQQndg1o2ETTmmr8g00zBKeARKFhWeD89JnKlA2OnClG1oQTtpQqZv+mu9JFVp7HhwaCsAEER7gWNAwY94+QEJwciwsNi75Rm3vCkbVRLOOmzYAK2L/p7ukiKzcsHj926Z1caCAMG0BwInvlkZPk3SOnPUsncP05IgQnh5JCw7LAeepZ7oQjuqmbdIrhLc+4G8SsAvZvGtAsCoUGorABBCcwCxq6R+NaNsWabFgIToalhYZFwXns0LO+CSffR094940CynH/pruiN6C5JBwaEMEGEBxfrzzqn2jAMdWAY7oRDMHJIFnQsCxwDj7nmXDiTDEyN4ojymH/xtqjWbdw/Ni23ZHQgCg2gOA0s6Cx92ggYqoRnGxYCI7EZEPDouA8/uRznAnHP8X4kZF906ZASfZvwI+M93NYS6d1A8LQQBxsAMHhTjRBezWCezbeEBwJZQUNywLnwPOV6UmDM+GITCoybncQKOn+TdimMWjQ06OTEQrNxXcIQwNxsYEOBodC896R05r3aDtsqok52bAQnBRlDQ3LAueJ5yozEy1wspxiYp1GOZO8f0MnmpF1C8aPX7QrFjSQBBvoQHBeeewkee/omYCJJniqibFn4w3BSVBe0LAa4DxfmZ4wjLhTDMSaYvybzLEK2b8RPpmyl04ja/vHj10YHxpIig10EDiHKTRHzmj+aSZ6qkk42bAQnBjlDQ2LgrN///MhE46MzeCgj8WMs/eiudAJ3r/p7tbJyNq+xNBAGmygA8A5/NiHNjRhoAQhxL03Km4IjkBFQcOywHn8hcr0xCx3wuEfW6edcGKWYv+mCc0FyaGBtNhAG4Nz+PEPyXtH2WZw0DLJ/wM8x+ESQnBCKhoaFgXnicde4E44PCzCpxjRY/SYJdi/6e7RyfCavvFjW29PBQ3IwAbaEBwLGs5EA76/tv+tELLEkhSCw0kVaFjVqgn7H42acJLv06ReRkG8/ZvuHo0Mr543fnzrn6eGBmRhA20ETmOioZvB/gv0oqYa3saxxBAcR6pBw6LgPPHIi/aEEz3FJL+lIWUR+zfWRLN67vjx8+VAAzKxgTYAh0Lz/tGoPRqxvRrJkw0LwVEYGpYFzsMvVqYnqkbUFJN0ozgVOBH7N3SPZnh17/jxUXnQgGxsoMTgHN7/EXn/1TMRezTxppoEF/WJ1NHgqA4Ni4JzYN+LlZlzVSMYizQTTsoC9m/o0mlk1Zzx41v+TCo0kAU2UEJwjlBojp4WnGjEp5oMJhtWR4JTFmhYFjh0wjnXmHBk37SZOs/+jbV0Wjln/FgG0EBW2ECJwDnimmgkTTUaNP+cYR0FTtmgYVUNE57c95JnwpHx6AmJafap00jP+LHN380EGsgSGygBOE1oBC/QE55q9NafM64jwCkrNCwLnIca4ARNMeFLrKCPScjao9HI8Eh3ptBA1tiAwuC0oEm2POJeLcw5Ds+htgan7NCwLHB+/HJllruHE3ZjZtDFgHJqQrMpW2ggD2xAQXCOPPER+eA172ZwjE1f571PEUutnGpLcNoFGpYFzoMNcOJPMbybNtPV3Q1keLhr/NjG72QODeSFDSgEjgXNq2e1qInE+7waEJhseBNSjrUVOO0GDcsC54F4Ew7/YsB0UWiGhrtzgwbyxAYUAOfIATrRnNX8E4n4VBN3Aznn2gKcdoWGRcE5eD8FpxYw4Yjc0pAcnAY0XePHc4QG8sYGCgTn6IGPfRONrL2asM9VQKUGp92hYVkTzn0NcMSWUXIu6mtBk/0ejbfcsYECwLGg8e3RZD/VFDDZsEoJTqdAw7ImnL0vV2bP1gLe6jdswolfkdBAUdhAjuA0oAmaaLKdaooZbJqVCpxOg4ZlTTh7X7HAid6nSX4i1YBGLwwaKBIbyAGco09+TD54/awm47aD5oV6ejyUCq4U4HQqNKwanXD2vBIy4fAuBhSvBU02VwaLVig2kCE4FJoToRNNzKlG9/y179k1/ONwBVIanE6HhmWBc+/hyuzZauCE478YMDpVoAEVsIEMwHFDI+8CPf/bt2TywPMsUhIchMYdBefQPUeaS6rwjeLoVIIGVMEGJILz6sGPyYnXz4U8nFz0Ar04P6Q/8DyLlAIHoeFngfMPRyozIXs4IqdRDWg0ZaABlbABCeBY0Lx2TpNzgV7UEivzB55nkRLgIDThUXCe+ns64ZhG8E2bwbWgkfs8mrSp9e/eFOCwiQaEJhIZz6sR+1wKVig4CI1YFjh/Rycc0+DdtBkEDoVmUEFoQEVsIAE4rx78pLF0knaULWeqUXCyYRUCDkITLwrOT/7uqD3heG9p8NdlQQPjbykIDaiKDcQA5zUKzRtnBfZo8p9qFJ1sWLmCg9AkqzbbAKc14fAnmy5r6UShSf8uCFmlLDYgAE4DmnOa+ESS81SjtDVWuYCD0KTLAudHr1Zmz5ieU6pGZYAGVMcGQsB57dAn5MSb57REF+jpngv0nBfq6eKQ8DefM33geRZlCg5CIycvOKyyQANlwAY44Lx26JRnokkxieiOPzf/OuACPTUeeJ5FmYCD0MjNAueHr1UMCxwGDSkFNFAWbMAGp3dEe/yjd6bIyTe8F+ylv0DPOZFEH40X/sDzLLLAkfV5f+PwwW0IjfwscP72tcoyc8BoQJPuLXHzrDTY7P7e1A59ztwvrDiv35y/dE4hF+gl+Rwl65uyfrt/ufXaFwDgr0v3T6AEbTxvjKzsWl65cGLOH5fp912Kb4fdd07tINWeu6Gu0VOn7m2/PGT0L64ITiFyN33jfo4Sdet371r2VzJ/u3+59dqdCI7cRrdeS665btz6wpo+9caGX3n+22+W5feuPDYWNLUGNEAaR356l1bZdsug0b+kkvtRdtzPUZKkQ8NCcOQ1ev615Jov/GvXF1WZwFEam8ZE03031OmOCnFdXkDBueimFUb/ooqyU01JJpvMoGEhOOkbHb2GXPOFHdwvqLKAoyw2u++ctKHRNDrQsB/OKDgX3rjc6F/co8RUw9szUrzMoWEhOMkLg4ZVBnCU/HbYvXtyR93ouZtQaCD8dhAKztbrlhl9C3kTjtwL9ESuqynRZJMbNCwEJ34Umu2f/1dCX0iqg6McNhY0VbZHw+4/Y2MN/54QCs751y0x+hZVHBfqea6h8V5XIwESEdgULXdoWAiOeKOj28n2z//LWF9EKoOjFDZsogHT3gxmwAjcXa/rWuX8zy02+gbsJRX7pndcJQzs5xNeoJdkiaVghUHDQnCiG90yRrZ/Lh40LFXBUQab3XdM7qjPcjaDHT+8ezbeNF2rbPmlxcZcCk4GF+gl+RyKVTg0LAQnuDTQsFQERwlsLGiM7tbSyQOM9Ze8HWJOFjjXLDLmLezJ5Cg77udQKGWgYSE4/ka3XE22/9K/kPKFoxo4hWPTmmha0PiAYcgIPlRe06Gy6eqFxrwFPYVONQrt2SgHDQvBaTW6+Wqy/Vo50LBUAqdQbJzQhAKT4C2OKTjnXTVgzB3oKmyqUWSyURYaFoLDoPnnmXzBqAJOYdjs3jW5w5zpbhxvRwHDkCFEZCXVzALn8gFj7vzuzKeawJs9i015aFidDM7opqvI9mv+WaZfLSqAUwg2d1jQdDU2g4WAYT/i/29RcNZfNt+Yu6A7+c2UztsPnE/hc/76gOP2AisNNKxOBCcPaFhFg5M7NnfcPrGjTqEhjs3gMGAg1dsbW1Fw1m7rN+b2dwtOJAlOsXwP4Cr03qjSQcPqJHAsaLb/Wq5fJEWCkys2DWjszWBRYHzX2CRTh4Kz5uI+o7e/K6fj8MImm9JCw+oEcEY3Xkm2j/1qIV8gRYGTGzYWNNOOUyeIAYxzTyflhLP6wnkWONkehxf2wPPSQ8NqZ3AoNGMFQcMqApxcsLnjz21oSOPK4ETApFxKsSg4q7bONXr7ujKfanIebNoGGlY7gjO68QoydvU/VeKYMm9wMsemAU3X3aQOWlJgnB+SEQVnZLTXmNOnZzrV5DjZtB00rHYCZ/S8K8jYVb+i1JWeeYKTKTYUGpNCQ/xXBscCpnmPlCRtbHCGN88x5szTM5tqctqzaVtoWO0Azuh5l5Oxq/6JkjfL5QVOZthY0Ex1efZoOMBAEDDgvpw45kV9IlFwhjZWGuBIOQ4H13E4ZD/ZtD00rDKDM7rhcjJ2pZrQsPIAJxNs7vgzGxrX8XYAMCQIGMI5Es8GnBUbeozKXMc+S+LjcM7FftnVMdCwygjO6HoKzT8uxSMbswZHOjZNaKzjbXnAsE3lLKLgLF/XbVTCJhzn9TPe62pClloZ1XHQsMoEzuj6y8jYlf+oVE+9zxIcqdhY0EzyrwxODAzYyGTjTDMKzrLVulHpDQAk6CrhiA3kDOpYaFhlAGd0/aVk7IpyQcPKChxp2Nzx3XMNaAhoUoHxXdSXXRScJasYOHGOw3N74HnHQ8NSGZzRdZeSscvLCQ0rC3CkYNOApvHgq9bd2xxgvGjEAaa5eyzjdxwcBWfxSs3o6ZVzsZ/EEBpPKoIzuu4SMnb5l0oNDUs2OKm/HSg0tcnuuwlpQBN6QZ7nhzAwdZILNCxNg8qiYTB65qS/2E9SCE1AKoGzZe0lZOyy9oCGJROcVNjsotBMdLf2aGIAw0UG+MDIvqhPJArOwGDd6JkjOtl49mrk7dkgNBGpAE4Dml9uK2hYssBJjM2u75zbYU7QzWCiZQ6M89flNd7Y4CxYXje6K8R9oZ7vrvHgo/GUITSCFQnOlrXbyNilt7QlNCwZ4CTCZtd3zjpOnQSBgaA9GAFggt6lLocoOPOXmkZXJWzCCb51IUUITcyKAGfLmm1k7JL2hoaVFpzY3w4WNHTpZPqhCQUmYD/Hf2IlsO+TcxSc/sVVo7sHYt/CkDCEJmF5gtOA5osdAQ0rDTixsNn1pzY0jolGDBhIDYyEJ0ykioIzb6FhdPUQDyjSH3iO0KQsD3C2rLmYjG27uaOgYSUFRxibJjSmffd2LGBINDAQAEzzGL2gscYRBWfuAgpOXfg4PGYIjaSyBGfL6ovJ2MWdCQ0rCThC2Oz6k7M7ahNddxOTaJkBUw8AxjvpFBwFp7d/1ujqJhfm5FkAAAoNSURBVELH4TFCaCSXBThbVl9Exi6+qaOhYcUFJxIbBo21RwNhF9s5gPEOIjKAUQQbsMGpzJs2dApOxHG4YAhNRskEZ8uqi8jYRQiNszjghH47uKAJOar2AeOdcjjAQBxgmq8L3LTxZIHTO2XoXfXw4/DoEJqMkwFOA5obERpOouAEYrPrj8/uqJ3zTjTygCExgLH2h+rJ3sol0zSo9FQmG+AEHIdHhNDkVBpwtqy6kIxdeANCE5IIOFxsLGiaEw3/YjvuXo0oMBATGOevUy0NKl3dE4au133H4REhNDmXBJzNKy8kYxcgNCJFgePDpjHR6HdDrXVlsHdg8QND4gHj/QERwLj+9xRMg4qunzM0vd585k1ECE1BxQFn88oLyNgF1yM0MQoDx4XNrj86s6N2Vm8cb3uBgQKBcV49rKg3FBwNzhoAZtSvRGgKTgSczSMXkLGt1yE0CQoCp4kNhaZ6jh5vO+7eBs43vAeNvICxXtZV+8fqSYMKkDNh4CA0ihQGzuaRrWRs6xcQmhTxwLGwuZ1Cc5azGRx1Na9MYAD4wHinK2VHG7tgcBAaxeKBs3n4fDJ2PkIjIy84+u3W0smxGRwJDGczWAYwQbcy8CYd1fODg9AomhMchEZ+TnD0mberfwMm/zERfGBCLrZzvttlDGBABBjXdFOCmuAgNKpHwVmwaOkzY6OfR2gyiILzpfe+/Yo+dXSiq/rJLEkEDAkAJmDSCQKGRAHDg60MafBvEJpy9MimX72iXd9bvOjIRYPmzPDUhLVnM/3mhFY9NUtUBaaxOZzdW7lk1K2/9W8XIzQl6n/BhrZ7b/GiMy8YNGtLtS6i1Weap1HTxya02qkZEgYMxAUGQjZ64wCj+rG3P4SmpCE48mLQsE/ous5m+vikVjvVWlJ5geEiAyHA1AOA8e4PQQQw3l+rdghNyUNw0lc7f9CsLmlBA7wriKffaoDjAwYKBKb53yGqg4PQtEkITvKqFjR6l/cTcO+Nmn57Uqt9ajS+rSNOiDIBBrzAOKYrJf5xckNo2iwEJ37GlkHTWOyHBsLu+p5h4BQBjHf5Bp5fp14ITZuG4Ig3uzkYGoh6ns3MLya12mmDFA5M3TPpqBVC0+YhONHNbB40ZxcFQwMiT+qb+cWUVrXBsQq72M518iQODIgA4/x86oTQdEgITnAzGwfN2YXh0IDoM4hn35nSaqdnCRcPHjABk04QMCQKGN4GdfEhNB0WguNvauOgOSMADcR5d4XZd6e12hmD+JHJHhjvMKVACE2HhuC0mtowZM4MiEEDcd83ioHTehuXCGAgABjfcXYEMGppg9B0eAgOwOSGIXM6BjSQ5B0xZ9+b1syz1YArjT3ABF0I6J2GgAcMuH+NGksohAaz6mRwJtYPmdML4kEDSd/re/Z9LzhZAEM4U1Ch4CA0mKtOBOfcuiFzan58aCApNrTZD6Y185zhv9I4DjAQ/uvc/51Cb8REaDBunQTO2bXJoYE02IAFzoxmnquSxMDUA4AhbmAaF/oUNtUgNFhonQDOmTVD5mR/cmggLTY048SMNeG0RLE/IBOY4vZsEBpMqHYG58zq9NCADGxoxslZzZyokqTANJHxAuP7tblqg9BgsWpHcD5bNWRO9KWHBmRhAwycSbakigcMIYQPTN2xLMt3KYXQYIlqJ3A+W0mh6ZICDcjEhmZ8OKvVGTggD5icL7NBaLBUtQM4p0aGzHPz5EEDsrGhGR9RcGoucFID45poMhUHocGkVGZwTg3LhwaywIZmfDyrmVNVx5XGKYFhP1lHaLDyVEZwPhkaMs/OlQ8NZIUNrfqxodWnag0d0gKT/UV9CA2WSWUC5+PB7KCBLLGhVT+xwWmeJHmAgQBggqYhkok1CA2WaWUA56MVQ+aZ3uyggayxoVVPGVp9pka4wETdnuA8hMrmCmKEBssllcH5cHn20EAe2EATHNP3rg3CwHgnHTkhNFiuqQjOyWXD5uk52UMDeWFDq33amHBiAQOZXUGM0GCFpBI4J5cOm6cr+UADeWJDq31W1eqzJhEGpu5BhkjZtEFosEJTAZwTS4bNz3KEBvLGBhg4hkniAeN4J850ITSYEhUJzgeLh81Pe/KFBorAhlY7XdVI1THhRABD5CyhEBpMqYoA5/1FxUADRWEDFjg1jRim710bQt+JM/log9BgSpYnOO8tHDY/7S4GGigSG1rtbM2acKKBSXUihdBgSpcHOO8ODJunCoQGisYGmuDU3Vcas4txGDDeZZZ4CA1WirIE550FI+aprmKhARWwoZnnGDiO628cwDgvzYkhDkKDlaoswPnF/BHzEwWgAVWwoZkTNjg8YOI/YwKhwUqZTHAsaHQ1oAGVsKGZk6ZWN+uE8PZqQHioQWiwUicDnLf7RsyPNXWgAdWwodUnTY2Ydc9D1IWvIkZosLYoDThv9Y2YHykGDaiIDa0+RcEhnrf6jbwRE6HB2qok4ByfO2J+BOpBA6piQ6tPmxqp190P4AoOocHasjjgHJs7Yn6oKDSgMjZggVPXGlf6hS6hEBqsrRMB5805I+aHRF1oQHVswAeOb8JBaLCOKAycNyxoupWGBsqADa0+0wLHYQ1Cg3VUPHBer4yYJ+vqQwNlwYZWn61rDmsQGqwjc4LzWs+IedIsBzRQJmxoxKhr1ZO13QgN1slRcF4/c/rnJ0oEDZQNGzrRfPsvhn5bgd8HhhXai5fcdlXZ3iamTNjc+ieH1uJEg2F21etvL9X7UpUFG4QGwzjNXlcecMqADUKDYSHNfL4c4KiODUKDYQJNfU59cFTGBqHBsBhNXrtLaXBUxQahwbAETVyjLjgqYoPQYFiKzo6pCY5q2CA0GCahM1erB45K2CA0GCaxz65UCxxVsEFoMCyDPr1CHXBUwAahwbAMO3WZGuAUjQ1Cg2E59PGldxQOTpHYIDQYlmMfbSsWnKKwQWgwrIBOXlwcOEVgg9BgWIGduLAYcPLGBqHBMAX64IL8wckTG4QGwxTqvfPzBScvbBAaDFOwd0fzAycPbBAaDFO4dzbvzgWcrLFBaDCsBL29MXtwssQGocGwEvXWedmCkxU2CA2GlbBj67MDJwtsEBoMK3FvrssGHNnYIDQY1ga9sUY+ODKxQWgwrI16bbVccGRhg9BgWBv26kp54MjABqHBsDbuyMidUsBJiw1Cg2Ed0OGh9OCkwQahwbAO6pXBdOAkxQahwbAO7KXlycFJgg1Cg2Ed3IvLkoETFxuEBsMweH5JfHDiYIPQYBjW7LnF8cARxQahwTDM17MLvycMjgg2CA2GYYE9PSAGThQ2CA2GYZH9fH40OGHYIDQYhgn3s/5wcIKwQWgwDIvdT+YFg8PDBqHBMCxxT/XywfFig9BgGJa6g3P84DixQWgwDJPWkz3fd4HDsEFoMAyT3oHuFjgUm19DaDAMy6r9+vd3AsCd/x+T6QfUVyGWLwAAAABJRU5ErkJggg\u003d\u003d"
  },
  "description": "Since 2015, we’ve been helping the world’s most influential brands to turn privacy compliance into a catalyst for better business outcomes.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "PARAM_TABLE",
    "name": "defaultSettings",
    "displayName": "Default Settings",
    "paramTableColumns": [
      {
        "param": {
          "type": "TEXT",
          "name": "region",
          "displayName": "Region (leave blank to have consent apply to all regions)",
          "simpleValueType": true,
          "canBeEmptyString": true,
          "help": "This field should be a comma separated list of ISO 3166-2 region codes"
        },
        "isUnique": true
      },
      {
        "param": {
          "type": "SELECT",
          "name": "ad_storage",
          "displayName": "Ad Storage Permission",
          "macrosInSelect": false,
          "selectItems": [
            {
              "value": "denied",
              "displayValue": "Denied"
            },
            {
              "value": "granted",
              "displayValue": "Granted"
            }
          ],
          "simpleValueType": true
        },
        "isUnique": false
      },
      {
        "param": {
          "type": "SELECT",
          "name": "ad_user_data",
          "displayName": "Ad User Data Permission",
          "macrosInSelect": false,
          "selectItems": [
            {
              "value": "denied",
              "displayValue": "Denied"
            },
            {
              "value": "granted",
              "displayValue": "Granted"
            }
          ],
          "simpleValueType": true
        },
        "isUnique": false
      },
      {
        "param": {
          "type": "SELECT",
          "name": "ad_personalization",
          "displayName": "Ad Personalization Permission",
          "macrosInSelect": false,
          "selectItems": [
            {
              "value": "denied",
              "displayValue": "Denied"
            },
            {
              "value": "granted",
              "displayValue": "Granted"
            }
          ],
          "simpleValueType": true
        },
        "isUnique": false
      },
      {
        "param": {
          "type": "SELECT",
          "name": "analytics_storage",
          "displayName": "Analytics Storage Permission",
          "macrosInSelect": false,
          "selectItems": [
            {
              "value": "denied",
              "displayValue": "Denied"
            },
            {
              "value": "granted",
              "displayValue": "Granted"
            }
          ],
          "simpleValueType": true
        },
        "isUnique": false
      }
    ]
  },
  {
    "type": "CHECKBOX",
    "name": "ads_data_redaction",
    "checkboxText": "Redact Ads Data",
    "simpleValueType": true
  },
  {
    "type": "CHECKBOX",
    "name": "url_passthrough",
    "checkboxText": "Pass through URL parameters",
    "simpleValueType": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// The first two lines are optional, use if you want to enable logging
const log = require('logToConsole');
log('data =', data);
const setDefaultConsentState = require('setDefaultConsentState');
const updateConsentState = require('updateConsentState');
const getCookieValues = require('getCookieValues');
const callInWindow = require('callInWindow');
const gtagSet = require('gtagSet');
const COOKIE_NAME = '_sp_consent_mode';
const gcmPermissionKeys = ['ad_storage', 'ad_user_data', 'ad_personalization', 'analytics_storage'];
/*
 *   Splits the input string using comma as a delimiter, returning an array of
 *   strings
 */
const splitInput = (input) => {
  return input.split(',')
      .map(entry => entry.trim())
      .filter(entry => entry.length !== 0);
};
/*
 *   Processes a row of input from the default settings table, returning an object
 *   which can be passed as an argument to setDefaultConsentState
 */
const parseCommandData = (settings) => {
  const regions = splitInput(settings.region);
  const commandData = {};
  
  gcmPermissionKeys.forEach(k => {
    commandData[k] = settings[k] || 'denied';
  });
  
  if (regions.length > 0) {
    commandData.region = regions;
  }
  return commandData;
};
/*
 *   Called when consent changes. Assumes that consent object contains keys which
 *   directly correspond to Google consent types.
 */
const onUserConsent = (consentModeStates) => {
  const updatedConsentModeStates = {};
  
  if (consentModeStates) {
    gcmPermissionKeys.forEach((k) => {
      if(consentModeStates[k] && (consentModeStates[k] === 'granted' || 'denied')) {
        updatedConsentModeStates[k] = consentModeStates[k];
      }
    });
  }
  
  updateConsentState(updatedConsentModeStates);
};
/*
 *   Executes the default command, sets the developer ID, and sets up the consent
 *   update callback
 */
const main = (data) => {
  /*
   * Optional settings using gtagSet
   */
  gtagSet('ads_data_redaction', data.ads_data_redaction);
  gtagSet('url_passthrough', data.url_passthrough);
  gtagSet('developer_id.dMjkzMm', true);
  // Set default consent state(s)
  const defaultSettings = data.defaultSettings || [{region: ''}];
  defaultSettings.forEach(settings => {
    const defaultData = parseCommandData(settings);
    // wait_for_update (ms) allows for time to receive visitor choices from the CMP
    defaultData.wait_for_update = 500;
    setDefaultConsentState(defaultData);
  });

  // Check if cookie is set and has values that correspond to Google consent
  // types. If it does, run onUserConsent().
  /*
  const settings = getCookieValues(COOKIE_NAME);
  if (typeof settings !== 'undefined') {
    onUserConsent(settings);
  }
  */
  /**
   *   Add event listener to trigger update when consent changes
   *
   *   References an external method on the window object which accepts a
   *   function as an argument. If you do not have such a method, you will need
   *   to create one before continuing. This method should add the function
   *   that is passed as an argument as a callback for an event emitted when
   *   the user updates their consent. The callback should be called with an
   *   object containing fields that correspond to the five built-in Google
   *   consent types.
   */
  callInWindow('_sp_.updateGoogleConsentMode', onUserConsent);
};

main(data);
data.gtmOnSuccess();


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_sp_.updateGoogleConsentMode"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "write_data_layer",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keyPatterns",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "ads_data_redaction"
              },
              {
                "type": 1,
                "string": "url_passthrough"
              },
              {
                "type": 1,
                "string": "developer_id.*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "cookieAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "cookieNames",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "_sp_consent_mode"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_consent",
        "versionId": "1"
      },
      "param": [
        {
          "key": "consentTypes",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_storage"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_user_data"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ad_personalization"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "analytics_storage"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "functionality_storage"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "personalization_storage"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "consentType"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "security_storage"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: No default values
  code: |-
    const mockData = {
      // Mocked field values
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();
    assertApi('setDefaultConsentState').wasCalled();
- name: Default values provided (granted)
  code: |-
    const mockData = {
      // Mocked field values
      defaultSettings: [{
        region: '',
        ad_storage: "granted",
        ad_user_data: "granted",
        ad_personalization: "granted",
        analytics_storage: "granted",
        functionality_storage: "granted",
        personalization_storage: "granted",
        security_storage: "granted",
      }],
      ads_data_redaction: true,
      url_passthrough: true
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();
    assertApi('setDefaultConsentState').wasCalled();
- name: Default values provided (denied)
  code: |-
    const mockData = {
      // Mocked field values
      defaultSettings: [{
        region: '',
        ad_storage: "denied",
        ad_user_data: "denied",
        ad_personalization: "denied",
        analytics_storage: "denied",
        functionality_storage: "denied",
        personalization_storage: "denied",
        security_storage: "denied",
      }],
      ads_data_redaction: true,
      url_passthrough: true
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();
    assertApi('setDefaultConsentState').wasCalled();


___NOTES___

Created on 2/7/2024, 3:34:20 PM


